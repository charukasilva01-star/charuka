<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s5 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s6 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s7 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s8 {font-kerning: none}
    span.s9 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s10 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s11 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s12 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
    span.s13 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
    span.s14 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s15 {font-kerning: none; color: #a34f83; background-color: #171818; -webkit-text-stroke: 0px #a34f83}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"en"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">RainFlow Survival - Stay Dry!</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&amp;display=swap"</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s6">:root</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">--primary-blue:</span><span class="s1"> #0A74DA</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">--secondary-light:</span><span class="s1"> #B4E8FF</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">--background-dark:</span><span class="s1"> #1F2937</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">--dryness-green:</span><span class="s1"> #10B981</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">--dryness-red:</span><span class="s1"> #EF4444</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s6">body</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s9">'Inter'</span><span class="s7">,</span><span class="s1"> </span><span class="s5">sans-serif</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">background-color:</span><span class="s1"> #0b111a</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">color:</span><span class="s1"> </span><span class="s5">white</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s5">flex</span><span class="s7">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">justify-content:</span><span class="s4"> </span><span class="s5">center</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">align-items:</span><span class="s1"> </span><span class="s5">flex-start</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">min-height:</span><span class="s1"> </span><span class="s10">100vh</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s10">20px</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">#gameContainer</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s10">100%</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">max-width:</span><span class="s1"> </span><span class="s10">600px</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">10px</span><span class="s1"> </span><span class="s10">30px</span><span class="s1"> </span><span class="s5">rgba(</span><span class="s10">0</span><span class="s7">,</span><span class="s1"> </span><span class="s10">0</span><span class="s7">,</span><span class="s1"> </span><span class="s10">0</span><span class="s7">,</span><span class="s1"> </span><span class="s10">0.5</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">1rem</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">overflow:</span><span class="s1"> </span><span class="s5">hidden</span><span class="s7">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">background-color:</span><span class="s4"> </span><span class="s1">var(--background-dark)</span><span class="s7">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">border:</span><span class="s4"> </span><span class="s10">4px</span><span class="s4"> </span><span class="s1">solid</span><span class="s4"> </span><span class="s1">var(--primary-blue)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s6">canvas</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s5">block</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">background:</span><span class="s1"> </span><span class="s5">linear-gradient(</span><span class="s10">180deg</span><span class="s7">,</span><span class="s1"> #1e3a8a </span><span class="s10">0%</span><span class="s7">,</span><span class="s1"> #172554 </span><span class="s10">100%</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">touch-action:</span><span class="s4"> </span><span class="s5">none</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Allows canvas to handle touch events */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s6">.btn-game</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">transition:</span><span class="s1"> </span><span class="s5">all</span><span class="s1"> </span><span class="s10">0.15s</span><span class="s1"> </span><span class="s5">ease-in-out</span><span class="s7">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">box-shadow:</span><span class="s4"> </span><span class="s10">0</span><span class="s4"> </span><span class="s10">4px</span><span class="s4"> </span><span class="s1">var(--primary-blue)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">.btn-game:hover</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">translateY(</span><span class="s10">-1px</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">box-shadow:</span><span class="s4"> </span><span class="s10">0</span><span class="s4"> </span><span class="s10">5px</span><span class="s4"> </span><span class="s1">var(--primary-blue)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">.btn-game:active</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">translateY(</span><span class="s10">3px</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">box-shadow:</span><span class="s4"> </span><span class="s10">0</span><span class="s4"> </span><span class="s10">1px</span><span class="s4"> </span><span class="s1">var(--primary-blue)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">/* Styling for the status bar */</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">#drynessBar</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s10">100%</span><span class="s7">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">9999px</span><span class="s7">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">width</span><span class="s4"> </span><span class="s10">0.3s</span><span class="s4"> </span><span class="s1">ease</span><span class="s7">,</span><span class="s4"> </span><span class="s1">background-color</span><span class="s4"> </span><span class="s10">0.3s</span><span class="s4"> </span><span class="s1">ease</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">/* Custom styles for the player character (using an emoji) */</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">.player-emoji</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">font-size:</span><span class="s1"> </span><span class="s10">2rem</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">line-height:</span><span class="s1"> </span><span class="s10">1</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">user-select:</span><span class="s1"> </span><span class="s5">none</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s5">pointer</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p3"><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"gameContainer"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex flex-col"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- Header --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">header</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-6 bg-gray-800 border-b-2 border-gray-700"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">h1</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-3xl font-extrabold text-white text-center tracking-wider"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">span</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-secondary-light"</span><span class="s3">&gt;</span><span class="s1">RainFlow</span><span class="s3">&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span><span class="s1"> Survival</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s6">h1</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-sm text-gray-400 text-center mt-1"</span><span class="s3">&gt;</span><span class="s1">Keep your gear dry. Navigate the downpour!</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s1">header</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- Score and Dryness Status --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 flex justify-between items-center bg-gray-700"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-lg font-bold"</span><span class="s3">&gt;</span><span class="s4">Score: </span><span class="s3">&lt;</span><span class="s6">span</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"scoreDisplay"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-yellow-400"</span><span class="s3">&gt;</span><span class="s4">0</span><span class="s3">&lt;/</span><span class="s6">span</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex items-center space-x-2"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">span</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"font-bold"</span><span class="s3">&gt;</span><span class="s1">Dryness:</span><span class="s3">&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-32 h-6 bg-gray-800 rounded-full border border-gray-500 overflow-hidden"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"drynessBar"</span><span class="s4"> </span><span class="s2">style</span><span class="s3">=</span><span class="s1">"width: 100%; background-color: var(--dryness-green);"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- Game Canvas --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">canvas</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"gameCanvas"</span><span class="s4"> </span><span class="s2">width</span><span class="s3">=</span><span class="s1">"600"</span><span class="s4"> </span><span class="s2">height</span><span class="s3">=</span><span class="s1">"400"</span><span class="s3">&gt;&lt;/</span><span class="s6">canvas</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- Controls and Messages --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 bg-gray-800 flex flex-col items-center space-y-3"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"messageBox"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold text-center h-8"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">span</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"gameStatus"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-secondary-light"</span><span class="s3">&gt;</span><span class="s1">Click Start to Play!</span><span class="s3">&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"startButton"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"btn-game bg-green-500 text-white font-bold py-3 px-8 rounded-xl w-full sm:w-auto text-lg hover:bg-green-600"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>Start Game</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-xs text-gray-500 mt-2"</span><span class="s3">&gt;</span><span class="s1">Use A/D or Left/Right Arrow keys or swipe/tap the canvas to move.</span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- Promotional Call to Action --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">footer</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-6 bg-gray-900 text-center"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-md font-semibold text-secondary-light"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>Need real-life RainFlow Survival?</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-sm text-gray-400 mt-1"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>Check out our rainproof jackets and bags for ultimate dryness protection!</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">a</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"#"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"inline-block mt-3 px-4 py-2 text-sm font-bold bg-primary-blue text-white rounded-lg hover:bg-blue-600 transition"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>Explore RainFlow Gear</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s6">a</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s1">footer</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// --- GAME CONSTANTS AND VARIABLES ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">const</span><span class="s1"> canvas </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'gameCanvas'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">const</span><span class="s1"> ctx </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">getContext</span><span class="s7">(</span><span class="s9">'2d'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">const</span><span class="s1"> startButton </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'startButton'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">const</span><span class="s1"> scoreDisplay </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'scoreDisplay'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">const</span><span class="s1"> drynessBar </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'drynessBar'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">const</span><span class="s1"> gameStatus </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'gameStatus'</span><span class="s7">);</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">let</span><span class="s1"> gameInterval</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">let</span><span class="s1"> isGameRunning </span><span class="s7">=</span><span class="s1"> </span><span class="s11">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">let</span><span class="s1"> score </span><span class="s7">=</span><span class="s1"> </span><span class="s12">0</span><span class="s7">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">let</span><span class="s4"> dryness </span><span class="s7">=</span><span class="s4"> </span><span class="s12">100</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Player's health</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Player Object</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">const</span><span class="s1"> player </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>x</span><span class="s7">:</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>y</span><span class="s7">:</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">-</span><span class="s1"> </span><span class="s12">40</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>width</span><span class="s7">:</span><span class="s1"> </span><span class="s12">30</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>height</span><span class="s7">:</span><span class="s1"> </span><span class="s12">30</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>speed</span><span class="s7">:</span><span class="s1"> </span><span class="s12">8</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dx</span><span class="s7">:</span><span class="s1"> </span><span class="s12">0</span><span class="s7">,</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span>emoji</span><span class="s7">:</span><span class="s4"> </span><span class="s9">'ðŸš¶'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">// Represents the user protected by RainFlow gear</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>draw</span><span class="s7">:</span><span class="s1"> </span><span class="s11">function</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s7">.</span><span class="s1">font </span><span class="s7">=</span><span class="s1"> </span><span class="s9">`</span><span class="s7">${</span><span class="s11">this</span><span class="s7">.</span><span class="s1">height</span><span class="s7">}</span><span class="s9">px Inter`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s7">.</span><span class="s1">textAlign </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'center'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s7">.</span><span class="s1">fillText</span><span class="s7">(</span><span class="s11">this</span><span class="s7">.</span><span class="s1">emoji</span><span class="s7">,</span><span class="s1"> </span><span class="s11">this</span><span class="s7">.</span><span class="s1">x</span><span class="s7">,</span><span class="s1"> </span><span class="s11">this</span><span class="s7">.</span><span class="s1">y</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">};</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Item Arrays</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">let</span><span class="s4"> raindrops </span><span class="s7">=</span><span class="s4"> </span><span class="s7">[];</span><span class="s4"> </span><span class="s1">// Hazards (reduce dryness)</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">let</span><span class="s4"> powerups </span><span class="s7">=</span><span class="s4"> </span><span class="s7">[];</span><span class="s4"><span class="Apple-converted-space">Â  </span></span><span class="s1">// RainFlow Logos (restore dryness/points)</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// --- GAME MECHANICS ---</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> resetGame</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>score </span><span class="s7">=</span><span class="s1"> </span><span class="s12">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dryness </span><span class="s7">=</span><span class="s1"> </span><span class="s12">100</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>raindrops </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>powerups </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">=</span><span class="s1"> </span><span class="s12">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>updateScoreDisplay</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>updateDrynessBar</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>gameStatus</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'Ready!'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> startGame</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">isGameRunning</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>resetGame</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>isGameRunning </span><span class="s7">=</span><span class="s1"> </span><span class="s11">true</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>startButton</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'Restart Game'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>gameStatus</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'Keep Moving!'</span><span class="s7">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Start generating items</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Wait a moment to ensure the canvas size is stable</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setTimeout</span><span class="s7">(()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>spawnItem</span><span class="s7">(</span><span class="s9">'rain'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setTimeout</span><span class="s7">(()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> spawnItem</span><span class="s7">(</span><span class="s9">'powerup'</span><span class="s7">),</span><span class="s1"> </span><span class="s12">3000</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">},</span><span class="s1"> </span><span class="s12">100</span><span class="s7">);</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>gameLoop</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> endGame</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>isGameRunning </span><span class="s7">=</span><span class="s1"> </span><span class="s11">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>gameStatus</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">`Game Over! Final Score: </span><span class="s7">${</span><span class="s1">score</span><span class="s7">}</span><span class="s9">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>startButton</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'Play Again'</span><span class="s7">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Custom message box for Game Over</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s4"> message </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`ðŸ’§ Oh no, you got soaked! Dryness reached 0%. \nYour Score: </span><span class="s7">${</span><span class="s4">score</span><span class="s7">}</span><span class="s1">.`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>showModal</span><span class="s7">(</span><span class="s1">message</span><span class="s7">,</span><span class="s1"> </span><span class="s9">'Game Over'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// --- UI UPDATES ---</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> updateScoreDisplay</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>scoreDisplay</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> score</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> updateDrynessBar</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Clamp dryness between 0 and 100</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dryness </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">max</span><span class="s7">(</span><span class="s12">0</span><span class="s7">,</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">min</span><span class="s7">(</span><span class="s12">100</span><span class="s7">,</span><span class="s1"> dryness</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>drynessBar</span><span class="s7">.</span><span class="s1">style</span><span class="s7">.</span><span class="s1">width </span><span class="s7">=</span><span class="s1"> dryness </span><span class="s7">+</span><span class="s1"> </span><span class="s9">'%'</span><span class="s7">;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Change color based on health level</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">dryness </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s12">60</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>drynessBar</span><span class="s7">.</span><span class="s1">style</span><span class="s7">.</span><span class="s1">backgroundColor </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'var(--dryness-green)'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">else</span><span class="s1"> </span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">dryness </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s12">25</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>drynessBar</span><span class="s7">.</span><span class="s1">style</span><span class="s7">.</span><span class="s1">backgroundColor </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'#F59E0B'</span><span class="s7">;</span><span class="s1"> </span><span class="s14">// Yellow/Amber</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>drynessBar</span><span class="s7">.</span><span class="s1">style</span><span class="s7">.</span><span class="s1">backgroundColor </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'var(--dryness-red)'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">dryness </span><span class="s7">&lt;=</span><span class="s1"> </span><span class="s12">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>endGame</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// --- ITEM GENERATION ---</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> spawnItem</span><span class="s7">(</span><span class="s1">type</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">isGameRunning</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s1"> x </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s7">(</span><span class="s1">canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">-</span><span class="s1"> </span><span class="s12">20</span><span class="s7">)</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> </span><span class="s12">10</span><span class="s7">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s4"> speed </span><span class="s7">=</span><span class="s4"> </span><span class="s12">2</span><span class="s4"> </span><span class="s7">+</span><span class="s4"> </span><span class="s7">(</span><span class="s4">score </span><span class="s7">/</span><span class="s4"> </span><span class="s12">200</span><span class="s7">)</span><span class="s4"> </span><span class="s7">*</span><span class="s4"> </span><span class="s12">0.5</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Speed increases with score</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'rain'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>raindrops</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>x</span><span class="s7">:</span><span class="s1"> x</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>y</span><span class="s7">:</span><span class="s1"> </span><span class="s7">-</span><span class="s12">10</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>radius</span><span class="s7">:</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s12">8</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> </span><span class="s12">6</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>dy</span><span class="s7">:</span><span class="s1"> speed</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>emoji</span><span class="s7">:</span><span class="s1"> </span><span class="s9">'ðŸ’§'</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">});</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// Spawn next rain item faster as score increases</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">let</span><span class="s1"> nextRainTime </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">max</span><span class="s7">(</span><span class="s12">200</span><span class="s7">,</span><span class="s1"> </span><span class="s12">1000</span><span class="s1"> </span><span class="s7">-</span><span class="s1"> score</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setTimeout</span><span class="s7">(()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> spawnItem</span><span class="s7">(</span><span class="s9">'rain'</span><span class="s7">),</span><span class="s1"> nextRainTime</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">else</span><span class="s1"> </span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'powerup'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>powerups</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>x</span><span class="s7">:</span><span class="s1"> x</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>y</span><span class="s7">:</span><span class="s1"> </span><span class="s7">-</span><span class="s12">10</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>radius</span><span class="s7">:</span><span class="s1"> </span><span class="s12">12</span><span class="s7">,</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>dy</span><span class="s7">:</span><span class="s4"> speed </span><span class="s7">*</span><span class="s4"> </span><span class="s12">0.8</span><span class="s7">,</span><span class="s4"> </span><span class="s1">// Slightly slower than rain</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>emoji</span><span class="s7">:</span><span class="s4"> </span><span class="s9">'ðŸŒ€'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">// Represents RainFlow logo/swirl</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>value</span><span class="s7">:</span><span class="s1"> </span><span class="s12">20</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">});</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// Powerups are rarer</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">let</span><span class="s1"> nextPowerupTime </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">max</span><span class="s7">(</span><span class="s12">3000</span><span class="s7">,</span><span class="s1"> </span><span class="s12">6000</span><span class="s1"> </span><span class="s7">-</span><span class="s1"> score </span><span class="s7">*</span><span class="s1"> </span><span class="s12">5</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setTimeout</span><span class="s7">(()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> spawnItem</span><span class="s7">(</span><span class="s9">'powerup'</span><span class="s7">),</span><span class="s1"> nextPowerupTime</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// --- DRAWING FUNCTIONS ---</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> clearCanvas</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctx</span><span class="s7">.</span><span class="s1">clearRect</span><span class="s7">(</span><span class="s12">0</span><span class="s7">,</span><span class="s1"> </span><span class="s12">0</span><span class="s7">,</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width</span><span class="s7">,</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> drawItems</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Draw Raindrops</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctx</span><span class="s7">.</span><span class="s1">font </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'24px Inter'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>raindrops</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">drop </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s7">.</span><span class="s1">textAlign </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'center'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s7">.</span><span class="s1">fillText</span><span class="s7">(</span><span class="s1">drop</span><span class="s7">.</span><span class="s1">emoji</span><span class="s7">,</span><span class="s1"> drop</span><span class="s7">.</span><span class="s1">x</span><span class="s7">,</span><span class="s1"> drop</span><span class="s7">.</span><span class="s1">y</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">});</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Draw Powerups (RainFlow Logo)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ctx</span><span class="s7">.</span><span class="s1">font </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'28px Inter'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>powerups</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">powerup </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s7">.</span><span class="s1">textAlign </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'center'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s7">.</span><span class="s1">fillText</span><span class="s7">(</span><span class="s1">powerup</span><span class="s7">.</span><span class="s1">emoji</span><span class="s7">,</span><span class="s1"> powerup</span><span class="s7">.</span><span class="s1">x</span><span class="s7">,</span><span class="s1"> powerup</span><span class="s7">.</span><span class="s1">y</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// --- UPDATE/COLLISION LOGIC ---</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> updatePlayer</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Move player</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">+=</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">dx</span><span class="s7">;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Wall detection</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">&lt;</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">=</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">else</span><span class="s1"> </span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">&gt;</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">-</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">-</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> updateItems</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Update Raindrops</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>raindrops</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">drop </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>drop</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+=</span><span class="s1"> drop</span><span class="s7">.</span><span class="s1">dy</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">});</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Update Powerups</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>powerups</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">powerup </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>powerup</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+=</span><span class="s1"> powerup</span><span class="s7">.</span><span class="s1">dy</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> checkCollisions</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Check Raindrop collisions</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>raindrops </span><span class="s7">=</span><span class="s1"> raindrops</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">drop </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// Collision detection (simple rectangle approximation for the emoji)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s1"> collisionX </span><span class="s7">=</span><span class="s1"> drop</span><span class="s7">.</span><span class="s1">x </span><span class="s7">&gt;</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">-</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> drop</span><span class="s7">.</span><span class="s1">x </span><span class="s7">&lt;</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">+</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s1"> collisionY </span><span class="s7">=</span><span class="s1"> drop</span><span class="s7">.</span><span class="s1">y </span><span class="s7">&gt;</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">y </span><span class="s7">-</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">height </span><span class="s7">&amp;&amp;</span><span class="s1"> drop</span><span class="s7">.</span><span class="s1">y </span><span class="s7">&lt;</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">y</span><span class="s7">;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">collisionX </span><span class="s7">&amp;&amp;</span><span class="s1"> collisionY</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// Hit! Decrease dryness</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>dryness </span><span class="s7">-=</span><span class="s1"> </span><span class="s12">10</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>updateDrynessBar</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameStatus</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'-10 Dryness!'</span><span class="s7">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s11">return</span><span class="s4"> </span><span class="s11">false</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Remove the hit raindrop</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// Remove if off-screen (missed)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">drop</span><span class="s7">.</span><span class="s1">y </span><span class="s7">&gt;</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>score</span><span class="s7">++;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>updateScoreDisplay</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s11">return</span><span class="s1"> </span><span class="s11">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">return</span><span class="s1"> </span><span class="s11">true</span><span class="s7">;</span><span class="s1"> </span><span class="s14">// Keep drop</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">});</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Check Powerup collisions</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>powerups </span><span class="s7">=</span><span class="s1"> powerups</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">powerup </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s1"> collisionX </span><span class="s7">=</span><span class="s1"> powerup</span><span class="s7">.</span><span class="s1">x </span><span class="s7">&gt;</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">-</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> powerup</span><span class="s7">.</span><span class="s1">x </span><span class="s7">&lt;</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">+</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s1"> collisionY </span><span class="s7">=</span><span class="s1"> powerup</span><span class="s7">.</span><span class="s1">y </span><span class="s7">&gt;</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">y </span><span class="s7">-</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">height </span><span class="s7">&amp;&amp;</span><span class="s1"> powerup</span><span class="s7">.</span><span class="s1">y </span><span class="s7">&lt;</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">y</span><span class="s7">;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">collisionX </span><span class="s7">&amp;&amp;</span><span class="s1"> collisionY</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// Hit! Restore dryness and add score</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>dryness </span><span class="s7">+=</span><span class="s1"> powerup</span><span class="s7">.</span><span class="s1">value</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>score </span><span class="s7">+=</span><span class="s1"> </span><span class="s12">50</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>updateScoreDisplay</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>updateDrynessBar</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>gameStatus</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'RainFlow Boost! +20 Dryness!'</span><span class="s7">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s11">return</span><span class="s4"> </span><span class="s11">false</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Remove the collected powerup</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// Remove if off-screen (missed)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">powerup</span><span class="s7">.</span><span class="s1">y </span><span class="s7">&gt;</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s11">return</span><span class="s1"> </span><span class="s11">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">return</span><span class="s4"> </span><span class="s11">true</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Keep powerup</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// --- GAME LOOP ---</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> gameLoop</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">isGameRunning</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>clearCanvas</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>updatePlayer</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>updateItems</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>checkCollisions</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">draw</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>drawItems</span><span class="s7">();</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>requestAnimationFrame</span><span class="s7">(</span><span class="s1">gameLoop</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// --- INPUT HANDLERS (Keyboard and Touch) ---</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Keyboard controls</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'keydown'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">isGameRunning</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">.</span><span class="s1">key </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'ArrowRight'</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">key</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">()</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'d'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">=</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">speed</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">else</span><span class="s1"> </span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">.</span><span class="s1">key </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'ArrowLeft'</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">key</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">()</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'a'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">=</span><span class="s1"> </span><span class="s7">-</span><span class="s1">player</span><span class="s7">.</span><span class="s1">speed</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">});</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>document</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'keyup'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">isGameRunning</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">.</span><span class="s1">key </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'ArrowRight'</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">key</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">()</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'d'</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">key </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'ArrowLeft'</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">key</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">()</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'a'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">=</span><span class="s1"> </span><span class="s12">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Touch/Click controls (Tap left half to move left, right half to move right)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>canvas</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'mousedown'</span><span class="s7">,</span><span class="s1"> handlePointerStart</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>canvas</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'touchstart'</span><span class="s7">,</span><span class="s1"> handlePointerStart</span><span class="s7">);</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>canvas</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'mouseup'</span><span class="s7">,</span><span class="s1"> handlePointerEnd</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>canvas</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'touchend'</span><span class="s7">,</span><span class="s1"> handlePointerEnd</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>canvas</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'touchcancel'</span><span class="s7">,</span><span class="s1"> handlePointerEnd</span><span class="s7">);</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> handlePointerStart</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>e</span><span class="s7">.</span><span class="s1">preventDefault</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">isGameRunning</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Use clientX for both mouse and touch</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s1"> clientX </span><span class="s7">=</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">touches </span><span class="s7">?</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">touches</span><span class="s7">[</span><span class="s12">0</span><span class="s7">].</span><span class="s1">clientX </span><span class="s7">:</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">clientX</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s1"> rect </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">getBoundingClientRect</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s1"> touchX </span><span class="s7">=</span><span class="s1"> clientX </span><span class="s7">-</span><span class="s1"> rect</span><span class="s7">.</span><span class="s1">left</span><span class="s7">;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">touchX </span><span class="s7">&lt;</span><span class="s1"> rect</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s14">// Left half</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">=</span><span class="s1"> </span><span class="s7">-</span><span class="s1">player</span><span class="s7">.</span><span class="s1">speed</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// Right half</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">=</span><span class="s1"> player</span><span class="s7">.</span><span class="s1">speed</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> handlePointerEnd</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>e</span><span class="s7">.</span><span class="s1">preventDefault</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">=</span><span class="s1"> </span><span class="s12">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// --- MODAL/MESSAGE BOX FUNCTION ---</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// Instead of alert(), use a custom simple modal</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> showModal</span><span class="s7">(</span><span class="s1">message</span><span class="s7">,</span><span class="s1"> title</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">let</span><span class="s1"> modal </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'customModal'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">modal</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>modal </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s9">'div'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>modal</span><span class="s7">.</span><span class="s1">id </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'customModal'</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>modal</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 transition-opacity duration-300 opacity-0 pointer-events-none'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>modal</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s9">`</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-sm transform scale-95 transition-transform duration-300"&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 class="text-2xl font-bold mb-4 text-secondary-light" id="modalTitle"&gt;&lt;/h3&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p class="text-white mb-6" id="modalMessage"&gt;&lt;/p&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex justify-end"&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="modalClose" class="px-6 py-2 bg-primary-blue text-white font-semibold rounded-lg hover:bg-blue-600 transition"&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Close</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>document</span><span class="s7">.</span><span class="s1">body</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">modal</span><span class="s7">);</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'modalClose'</span><span class="s7">).</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>modal</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s9">'opacity-0'</span><span class="s7">,</span><span class="s1"> </span><span class="s9">'pointer-events-none'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>document</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s9">'#customModal &gt; div'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s9">'scale-100'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>document</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s9">'#customModal &gt; div'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s9">'scale-95'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'modalTitle'</span><span class="s7">).</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> title</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'modalMessage'</span><span class="s7">).</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> message</span><span class="s7">.</span><span class="s1">replace</span><span class="s7">(</span><span class="s15">/\n/</span><span class="s11">g</span><span class="s7">,</span><span class="s1"> </span><span class="s9">'&lt;br&gt;'</span><span class="s7">);</span><span class="s1"> </span><span class="s14">// Support new lines</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Show the modal with transition</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setTimeout</span><span class="s7">(()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>modal</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s9">'opacity-0'</span><span class="s7">,</span><span class="s1"> </span><span class="s9">'pointer-events-none'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>document</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s9">'#customModal &gt; div'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s9">'scale-95'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>document</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s9">'#customModal &gt; div'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s9">'scale-100'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">},</span><span class="s1"> </span><span class="s12">50</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">// --- INITIALIZATION ---</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s11">function</span><span class="s1"> setupCanvas</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s11">const</span><span class="s1"> container </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'gameContainer'</span><span class="s7">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Set canvas width to container width</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">=</span><span class="s1"> container</span><span class="s7">.</span><span class="s1">clientWidth</span><span class="s7">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Maintain a good aspect ratio that fits mobile screens (e.g., 600x400 ratio)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">*</span><span class="s1"> </span><span class="s7">(</span><span class="s12">400</span><span class="s1"> </span><span class="s7">/</span><span class="s1"> </span><span class="s12">600</span><span class="s7">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Reset player position based on new canvas size</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">y </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">-</span><span class="s1"> </span><span class="s12">40</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">x </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s12">2</span><span class="s7">;</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Redraw initial state</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>clearCanvas</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">draw</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>window</span><span class="s7">.</span><span class="s1">onload </span><span class="s7">=</span><span class="s1"> </span><span class="s11">function</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>setupCanvas</span><span class="s7">();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Attach resize listener for responsiveness</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>window</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'resize'</span><span class="s7">,</span><span class="s1"> setupCanvas</span><span class="s7">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>startButton</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'click'</span><span class="s7">,</span><span class="s1"> startGame</span><span class="s7">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// Initial draw for the player</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>player</span><span class="s7">.</span><span class="s1">draw</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s7">};</span></p>
<p class="p5"><span class="s8"></span><br></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
</body>
</html>
